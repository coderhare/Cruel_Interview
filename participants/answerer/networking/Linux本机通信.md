> 参考链接https://www.zhihu.com/question/43590414/answer/1928842338

## 127.0.0.1 本机网络 IO 需要经过网卡吗？
- 127.0.0.1 本机网络 IO 不经过网卡


## 数据包在内核中是个什么走向，和外网发送相比流程上有啥差别？
- 本机网络 IO 过程除了不过网卡，其它流程如内核协议栈还都得走.总的来说，本机网络 IO 和跨机 IO 比较起来，确实是节约了驱动上的一些开销。发送数据不需要进 RingBuffer 的驱动队列，直接把 skb 传给接收协议栈（经过软中断）。但是在内核其它组件上，可是一点都没少，系统调用、协议栈（传输层、网络层等）、设备子系统整个走了一个遍。连“驱动”程序都走了（虽然对于回环设备来说只是一个纯软件的虚拟出来的东东）。所以即使是本机网络 IO，切忌误以为没啥开销就滥用。

## 用本机 ip（例如192.168.x.x） 和用 127.0.0.1 性能上有差别吗？
- 用本机 ip（例如192.168.x.x） 和用 127.0.0.1 性能没有大差别.这是因为内核在设置 ip 的时候，把所有的本机 ip 都初始化 local 路由表里了，而且类型写死 RTN_LOCAL。在后面的路由项选择的时候发现类型是 RTN_LOCAL 就会选择 lo 了。