

## 一、写在前面

今天主要是学习一下关于Java的向上转型与向下转型。

参考链接：https://zhuanlan.zhihu.com/p/34026164

## 二、Java

一句话：父类引用指向子类对象。转型的过程中不改变对象的类型

### 1、定义

有2个类，Father和Son，继承关系。

例子1：

```java
Father f1 = new Son(); // 这就叫 upcasting （向上转型)
// 现在f1引用指向一个Son对象，即父类指针指向子类对象

Son s1 = (Son)f1; // 这就叫 downcasting (向下转型)		
// 现在s1引用指向一个Son对象，即子类指针指向子类对象
```

例子2：

```java
Father f2 = new Father();
Son s2 = (Son)f2; // 出错，子类引用不能指向父类对象
```



### 2、总结：

1、父类引用指向子类对象，而子类引用不能指向父类对象。**

2、把子类对象直接赋给父类引用叫upcasting向上转型，向上转型不用强制转换。

3、把指向子类对象的父类引用赋给子类引用叫向下转型(downcasting)，要强制转换。

4、使用的时候是什么类型，就能用什么类型的方法。

5、父类对象可以是接口，且经常是接口。

### 3、常见使用

1、函数参数里一般可能有一个Object类型，意思是你可以传入任意类型的一个对象进来，但是在函数里具体使用的时候，必须使用强转才可以。

### 4、各自的优势

向上转型的优势

以父类（比如Object）为函数参数，调用函数时传入子类对象，就是利用了向上转型。这样使代码变得简洁。不然的话，有多少个子类就需要写多少个函数。这也体现了JAVA的抽象编程思想。



### 5、不安全的向下转型

定义一个父类对象，并且强制向下转型为子类类型，这样编译无错但会运行会出错
